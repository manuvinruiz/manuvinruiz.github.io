---
title: ROSPlan documentation, planner
---
<!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="UTF-8">
		<title>ROSPlan by KCL-Planning</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="../stylesheets/normalize.css" media="screen">
		<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen">
		<link rel="stylesheet" type="text/css" href="../stylesheets/github-light.css" media="screen">
		<link rel="stylesheet" type="text/css" href="../stylesheets/syntax.css" media="screen">
		<script src="../jquery.js"></script> 
		<script> 
		$(function(){
		  $("#includedContent").load("../templates/nav-main.html"); 
		  $("#includedSideBar").load("../templates/nav-sidebar.html"); 
		});
		</script>
	</head>
	<body>
    	<div id="includedContent"></div>

		<section class="main-content">

	    	<div id="includedSideBar"></div>
			<section class="documentation-content">

			<h2>Replacing the Problem Generation</h2><a href="#problem"></a>
			<p>The default problem generated is a planning problem in PDDL 2.1 or earlier. The problem is generated by <em>rosplan_planning_system::PDDLProblemGenerator</em>. The default problem generation uses a domain file and the information stored in the Knowledge Management System. If you want to change the default problem generation there is one step; either:</p>
			<ol>
			<li>Disable the default problem generation completely; or</li>
			<li>Provide a new implementation of <em>PDDLProblemGenerator</em>.</li>
			</ol>

			<img src="images/dia_problem.png" class="chart"/>

			<p>Step 1 means that the problem generation will not be called automatically from ROSPlan.</p>

			<h4>Contents:</h4>
			<ul>
			<li><a href="#dpg">Disabling the default problem generation</a></li>
			<li><a href="#rpg">Reimplementing the default problem generation</a></li>
			</ul>

			<a id="dpg"></a>
			<h4>Disabling the default problem generation</h4>

			<p>The problem instance is (re)generated before each planning attempt. It is generated by requesting an up-to-date model from the Knowledge Base. More information on the Knowledge Base can be found in <a href="http://kcl-planning.github.io/ROSPlan/documentation/knowledge_base_use.html">using the knowledge base</a>.</p>

			<p>You can disable the generation of a default problem file using a launch parameter:</p>
{% highlight xml linenos=table %}
<!-- planning system -->
<node name="rosplan_planning_system" pkg="rosplan_planning_system" type="planner" respawn="false" output="screen">
	<!-- other parameters removed -->
    <!-- to run the planner -->
    <param name="generate_default_problem" value="false" />

</node>
{% endhighlight %}

			<p>This is most useful if you don't want a PDDL problem at all. For example, you might replace the planner parameter with a simple script:</p>
{% highlight xml linenos=table %}
<param name="planner_command" value="cat scripted_plan.pddl" />
{% endhighlight %}
			<p>More information on replacing the planner is in <a href="http://kcl-planning.github.io/ROSPlan/documentation/replace_planner.html">replacing the planner</a>.</p>

			<a id="rpg"></a>
			<h4>Reimplementing the default problem generation</h4>

			<p>The problem is generated by <em>rosplan_planning_system::PDDLProblemGenerator</em>. If you want to change the default problem generation, you should provide an implementation of this class:</p> 
{% highlight c++ linenos=table %}
/**
 * This class is responsible for generating the PDDL instance.
 * This is done by using the objects already retrieved and stored (see PlanningEnvironment.h).
 */
#include <string>
#include "PlanningEnvironment.h"

#ifndef KCL_PDDLproblemgenerator
#define KCL_PDDLproblemgenerator

namespace KCL_rosplan {

	class PDDLProblemGenerator
	{
	private:

		void makeHeader(PlanningEnvironment environment, std::ofstream &pFile);
		void makeInitialState(PlanningEnvironment environment, std::ofstream &pFile);
		void makeGoals(PlanningEnvironment environment, std::ofstream &pFile);

	public:

		void generatePDDLProblemFile(PlanningEnvironment &environment, std::string &problemPath);

	};
} // close namespace

#endif
{% endhighlight %}

			<p>

			</section>

			<footer class="site-footer">
				<span class="site-footer-owner"><a href="https://github.com/KCL-Planning/ROSPlan">ROSPlan</a> is maintained by <a href="https://github.com/KCL-Planning">KCL-Planning</a>.</span>
				<span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
			</footer>

		</section>


	</body>
</html>
